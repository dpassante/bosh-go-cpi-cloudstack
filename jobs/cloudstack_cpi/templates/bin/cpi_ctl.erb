#!/bin/bash

LOG_DIR=/var/vcap/sys/log/cloudstack_cpi
RUN_DIR=/var/vcap/sys/run/cloudstack_cpi
PIDFILE=$RUN_DIR/cpi.pid

case $1 in

start)
mkdir -p $RUN_DIR
chown -R vcap:vcap $RUN_DIR

# Logs are generated by bin/cpi
mkdir -p $LOG_DIR
chown -R vcap:vcap $LOG_DIR

echo 1 > $PIDFILE
;;

stop)
rm -f $PIDFILE

;;

*)

echo "Usage: cpi_ctl {start|stop}" ;;
esac
